<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Quinn</title><meta name="description" content="Before Sunrise"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="/css/useso.css"></head><body><header><a href="/" class="logo-link"><img src="/img/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives/index.html" target="_self" class="nav-list-link">BLOGS</a></li><li class="nav-list-item"><a href="/index.html" target="_self" class="nav-list-link">PORTFOLIO</a></li><li class="nav-list-item"><a href="https://github.com/suanmiao" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><ul class="home post-list"><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/Mesos-Architecture-in-Brief/" class="post-title-link">Mesos Architecture in Brief</a></h2><div class="post-meta"><div class="post-time">Jul 28, 2017</div></div><div class="post-content"><h3 id="Incentive">Incentive</h3><p>Before coming to Mesosphere as an intern, I read the <a href="http://mesos.berkeley.edu/mesos_tech_report.pdf">mesos paper</a> and have a general understanding of it’s architecture, well none of these understanding is based on actual code. After 1.5 month in Mesosphere, contributing some code to the project, it’s necessary to connect both the general flow and code logic together.</p>
<h3 id="Background">Background</h3><p><strong>Mesos Architecture</strong></p>
<p>There has been a pretty well <a href="http://mesos.apache.org/documentation/latest/architecture/">explanation</a> of different roles and relationships between these important components in Mesos. </p>
<p>In brief, we have several important concepts: Master, Agent/Slave, Framework (consisting of Scheduler and Executor). Master and Agent nodes are physical or virtual machines in datacenter. Master node is responsible for scheduling tasks (this “task” is our general understanding of task, meaning “a specific work to do, such as running a Spark job”, which is different from the definition of “task” in Mesos project), Agent node is responsible for running task. In order to scheduler and execute tasks in this distributed system, it’s necessary to have corresponding parts on both Master and Agent doing scheduling and executing work respectively. We call it Framework as a whole. The part that’s working on the Master node is called scheduler, the other part working on the Agent node is called executor. From this perspective, it’s pretty easy to understand how do these two names come from.</p>
<p>Since there might be multiple kind of tasks to run, we sometimes need to run multiple Frameworks (thus multiple schedulers, executors components) on Mesos, thus on the Master node, there might multiple schedulers, on Agent node, there might be multiple executors.</p>
<p><img src="/img/mesos/img1.jpg" alt="Alt text"><br></div><a href="/2017/Mesos-Architecture-in-Brief/" class="read-more">... more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/Rvalue-Reference/" class="post-title-link">Rvalue Reference</a></h2><div class="post-meta"><div class="post-time">Jul 18, 2017</div></div><div class="post-content"><h3 id="Background">Background</h3><p>Rvalue reference:</p>
<ul>
<li>An rvalue reference is a reference that will bind only to a temporary object.</li>
</ul>
<p>std::move, std::forward</p>
<ul>
<li>std::move<pre><code>* takes <span class="operator">an</span> object <span class="operator">and</span> allows you <span class="built_in">to</span> treat <span class="keyword">it</span> <span class="keyword">as</span> <span class="operator">a</span> temporary (<span class="operator">an</span> rvalue)
</code></pre></li>
<li>std::forward<pre><code>* has a <span class="built_in">single</span> use <span class="keyword">case</span>: <span class="keyword">to</span> cast a templated <span class="keyword">function</span> parameter (inside the <span class="keyword">function</span>) <span class="keyword">to</span> the value category (lvalue <span class="keyword">or</span> rvalue) the caller used <span class="keyword">to</span> pass it. 
* This allows rvalue arguments <span class="keyword">to</span> be passed <span class="keyword">on</span> <span class="keyword">as</span> rvalues, <span class="keyword">and</span> lvalues <span class="keyword">to</span> be passed <span class="keyword">on</span> <span class="keyword">as</span> lvalues, a scheme called <span class="string">"perfect forwarding."</span>
</code></pre></li>
</ul>
<p>operator =</p>
<ul>
<li>default implementation for operator= is copy<pre><code>* it copies <span class="keyword">each</span> member, it’s calling the <span class="function"><span class="keyword">constructor</span> <span class="title">that</span> <span class="title">accepting</span> <span class="title">the</span> <span class="title">type</span> <span class="title">on</span> <span class="title">the</span> <span class="title">right</span> <span class="title">of</span> <span class="title">the</span> <span class="title">operator</span>=
* <span class="title">for</span> <span class="title">example</span> <span class="title">for</span> <span class="title">base_string</span>, <span class="title">the</span> 7<span class="title">th</span> <span class="title">constructor</span>:</span>
        * basic_string( <span class="keyword">const</span> basic_string&amp; other );
        * <span class="keyword">Copy</span> <span class="function"><span class="keyword">constructor</span>. <span class="title">Constructs</span> <span class="title">the</span> <span class="title">string</span> <span class="title">with</span> <span class="title">the</span> <span class="title">copy</span> <span class="title">of</span> <span class="title">the</span> <span class="title">contents</span> <span class="title">of</span> <span class="title">other</span>.</span>
</code></pre></li>
<li>Thus in order for the the class type to accept rvalue reference, it should also have a constructor accepting a rvalue reference<pre><code>* <span class="keyword">and</span> the <span class="function"><span class="keyword">constructor</span> <span class="title">should</span> <span class="title">be</span> <span class="title">implemented</span> <span class="title">by</span> <span class="title">std</span>:</span>:move
* see the <span class="number">8</span>th <span class="function"><span class="keyword">constructor</span></span>
</code></pre></li>
</ul>
<p>move constructor</p>
<ul>
<li>Move constructors typically “steal” the resources held by the argument (e.g. pointers to dynamically-allocated objects, file descriptors, TCP sockets, I/O streams, running threads, etc.) rather than make copies of them</li>
</ul></div><a href="/2017/Rvalue-Reference/" class="read-more">... more</a></article></li></ul></section><footer><div class="paginator"><a class="prev"> </a><a class="prev"> </a></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-71082558-1",'auto');ga('send','pageview');</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>