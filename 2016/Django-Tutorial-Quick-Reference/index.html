<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Django Tutorial Quick Reference · Quinn</title><meta name="description" content="Django Tutorial for BeginnersThis is a brief tutorial for Django setup, only critical steps are noted, it aims serve as a quick reference when you want to setup a Django project or when yo forget some part of it.  For more detailed information, please see official tutorial
Create a Project
$ django-admin startproject [project name]

Project Structure&lt;figure class="><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="/css/useso.css"></head><body><header><a href="/" class="logo-link"><img src="/img/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives/index.html" target="_self" class="nav-list-link">BLOGS</a></li><li class="nav-list-item"><a href="/index.html" target="_self" class="nav-list-link">PORTFOLIO</a></li><li class="nav-list-item"><a href="https://github.com/suanmiao" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Django Tutorial Quick Reference</h1><div class="post-meta"><div class="post-time">Dec 14, 2016</div></div><div class="post-content"><h3 id="Django_Tutorial_for_Beginners">Django Tutorial for Beginners</h3><p>This is a brief tutorial for Django setup, only critical steps are noted, it aims serve as a quick reference when you want to setup a Django project or when yo forget some part of it.  For more detailed information, please see <a href="https://docs.djangoproject.com/en/1.10/intro/tutorial01/" target="_blank" rel="external">official tutorial</a></p>
<h4 id="Create_a_Project">Create a Project</h4><ul>
<li>$ django-admin startproject [project name]</li>
</ul>
<h4 id="Project_Structure">Project Structure</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysite/</span><br><span class="line">    manage<span class="class">.py</span></span><br><span class="line">    mysite/</span><br><span class="line">        __init__.<span class="function"><span class="title">py</span><span class="params">(empty file, indicates it’s a package)</span></span></span><br><span class="line">        settings.<span class="function"><span class="title">py</span><span class="params">(configuration for this project)</span></span></span><br><span class="line">        urls.<span class="function"><span class="title">py</span><span class="params">(url declarations)</span></span></span><br><span class="line">        wsgi.py</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="Run_Server">Run Server</h4><ul>
<li>python manage.py runserver ([port]/[url:port])</li>
</ul>
<h4 id="Projects_vs_App">Projects vs App</h4><ul>
<li>App is a web application (blog system, database)</li>
<li>Project is a collection of apps for a particular website</li>
<li>Project can contains multiple apps, an app can be in multiple projects</li>
</ul>
<h4 id="Create_App">Create App</h4><ul>
<li>python manage.py startapp [app name]</li>
</ul>
<p>App Structure</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">polls/</span><br><span class="line">    __init__<span class="class">.py</span></span><br><span class="line">    admin<span class="class">.py</span></span><br><span class="line">    apps<span class="class">.py</span></span><br><span class="line">    migrations/</span><br><span class="line">        __init__<span class="class">.py</span></span><br><span class="line">    models<span class="class">.py</span></span><br><span class="line">    tests<span class="class">.py</span></span><br><span class="line">    views.py</span><br></pre></td></tr></table></figure>
<p><strong>Here, we should write the view part first</strong> </p>
<p>Step 1:</p>
<ul>
<li>Create urls.py in your app</li>
<li>Map the url (in urls.py)<br>e.g.: url(r’^$’, views.index, name=‘index’)</li>
<li>Include that in project urls<br>e.g.: url(r’calculator/‘, include(‘calculator.urls’))</li>
</ul>
<p><strong>URL routing with parameters</strong></p>
<ul>
<li>url(r’^delete_item/(?P<item_id>\d+)$’, shared_todo_list.views.delete_item)</item_id></li>
</ul>
<h4 id="Creating_Models">Creating Models</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class <span class="function"><span class="title">PostModel</span><span class="params">(models.Model)</span></span>:</span><br><span class="line">    <span class="attribute">content</span> = models.<span class="function"><span class="title">CharField</span><span class="params">(max_length=<span class="number">100</span>)</span></span></span><br><span class="line">    id = models.<span class="function"><span class="title">AutoField</span><span class="params">(null=False, primary_key=True)</span></span></span><br><span class="line">    TYPE_CHOICE = (</span><br><span class="line">        (<span class="string">"IMG"</span>, <span class="string">"image"</span>),</span><br><span class="line">        (<span class="string">"TEXT"</span>, <span class="string">"text"</span>),</span><br><span class="line">    )</span><br><span class="line">    type = models.<span class="function"><span class="title">CharField</span><span class="params">(max_length=<span class="number">100</span>, choices=TYPE_CHOICE)</span></span></span><br><span class="line">    <span class="tag">img</span> = models.<span class="function"><span class="title">ImageField</span><span class="params">(upload_to=<span class="string">"grumblr/static/"</span>, max_length=<span class="number">500</span>, blank=True)</span></span></span><br><span class="line">    author = models.<span class="function"><span class="title">ForeignKey</span><span class="params">(UserModel, default=<span class="string">""</span>)</span></span></span><br><span class="line">    update_date = models.<span class="function"><span class="title">DateTimeField</span><span class="params">(auto_now=True)</span></span></span><br><span class="line">    create_date = models.<span class="function"><span class="title">DateTimeField</span><span class="params">(auto_now_add=True)</span></span></span><br><span class="line">    likes = models.<span class="function"><span class="title">IntegerField</span><span class="params">(default=<span class="number">0</span>)</span></span></span><br><span class="line">    dislikes = models.<span class="function"><span class="title">IntegerField</span><span class="params">(default=<span class="number">0</span>)</span></span></span><br><span class="line">    comments = models.<span class="function"><span class="title">ManyToManyField</span><span class="params">(<span class="string">"CommentModel"</span>)</span></span></span><br></pre></td></tr></table></figure>
<h4 id="Creating_Form_and_form_Validation">Creating Form and form Validation</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class <span class="function"><span class="title">RegistrationForm</span><span class="params">(forms.Form)</span></span>:</span><br><span class="line">    username = forms.<span class="function"><span class="title">CharField</span><span class="params">(max_length=<span class="number">20</span>)</span></span></span><br><span class="line">    first_name = forms.<span class="function"><span class="title">CharField</span><span class="params">(max_length=<span class="number">20</span>)</span></span></span><br><span class="line">    last_name = forms.<span class="function"><span class="title">CharField</span><span class="params">(max_length=<span class="number">20</span>)</span></span></span><br><span class="line">    email = forms.<span class="function"><span class="title">CharField</span><span class="params">(max_length=<span class="number">40</span>, label=<span class="string">'Email'</span>)</span></span></span><br><span class="line">    password = forms.CharField(max_length=<span class="number">20</span>,</span><br><span class="line">                               label=<span class="string">'Password'</span>,</span><br><span class="line">                               widget=forms.<span class="function"><span class="title">PasswordInput</span><span class="params">()</span></span>)</span><br><span class="line">    password_confirm = forms.CharField(max_length=<span class="number">20</span>,</span><br><span class="line">                                       label=<span class="string">'Confirm password'</span>,</span><br><span class="line">                                       widget=forms.<span class="function"><span class="title">PasswordInput</span><span class="params">()</span></span>)</span><br><span class="line">    age = forms.<span class="function"><span class="title">IntegerField</span><span class="params">(label=<span class="string">"Age"</span>)</span></span></span><br><span class="line">    bio = forms.<span class="function"><span class="title">CharField</span><span class="params">(label=<span class="string">"Short Bio"</span>, max_length=<span class="number">200</span>)</span></span></span><br><span class="line">    avatar = forms.<span class="function"><span class="title">ImageField</span><span class="params">(required=False)</span></span></span><br><span class="line"></span><br><span class="line">    def <span class="function"><span class="title">clean</span><span class="params">(self)</span></span>:</span><br><span class="line">        cleaned_data = <span class="function"><span class="title">super</span><span class="params">(RegistrationForm, self)</span></span>.<span class="function"><span class="title">clean</span><span class="params">()</span></span></span><br><span class="line"></span><br><span class="line">        username = cleaned_data.<span class="function"><span class="title">get</span><span class="params">(<span class="string">'username'</span>)</span></span></span><br><span class="line">        password = cleaned_data.<span class="function"><span class="title">get</span><span class="params">(<span class="string">'password'</span>)</span></span></span><br><span class="line">        password_confirm = cleaned_data.<span class="function"><span class="title">get</span><span class="params">(<span class="string">'password_confirm'</span>)</span></span></span><br><span class="line">        <span class="keyword">if</span> password and password_confirm and password != password_confirm:</span><br><span class="line">            raise forms.<span class="function"><span class="title">ValidationError</span><span class="params">(<span class="string">"Passwords did not match."</span>)</span></span></span><br><span class="line">        <span class="keyword">if</span> <span class="function"><span class="title">len</span><span class="params">(User.objects.filter(username=username)</span></span>) &gt; <span class="number">0</span>:</span><br><span class="line">            raise forms.<span class="function"><span class="title">ValidationError</span><span class="params">(<span class="string">"User already exist"</span>)</span></span></span><br></pre></td></tr></table></figure>
<h4 id="Form_validation_and_Model_Referencing">Form validation and Model Referencing</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">form</span> = <span class="function"><span class="title">RegistrationForm</span><span class="params">(request.POST, request.FILES)</span></span></span><br><span class="line"><span class="keyword">if</span> <span class="tag">form</span>.<span class="function"><span class="title">is_valid</span><span class="params">()</span></span>:</span><br><span class="line">    avatar = <span class="tag">form</span><span class="class">.cleaned_data</span>[<span class="string">'avatar'</span>]</span><br><span class="line">    new_user = User(username=<span class="tag">form</span><span class="class">.cleaned_data</span>[<span class="string">'username'</span>], last_name=<span class="tag">form</span><span class="class">.cleaned_data</span>[<span class="string">'last_name'</span>],</span><br><span class="line">                    first_name=<span class="tag">form</span><span class="class">.cleaned_data</span>[<span class="string">'first_name'</span>], email=<span class="tag">form</span><span class="class">.cleaned_data</span>[<span class="string">'email'</span>],</span><br><span class="line">                    password=<span class="tag">form</span><span class="class">.cleaned_data</span>[<span class="string">'password'</span>],</span><br><span class="line">                    avatar=avatar, bio=<span class="tag">form</span><span class="class">.cleaned_data</span>[<span class="string">'bio'</span>], age=<span class="tag">form</span><span class="class">.cleaned_data</span>[<span class="string">'age'</span>])</span><br><span class="line">    new_user.<span class="function"><span class="title">set_password</span><span class="params">(form.cleaned_data[<span class="string">'password'</span>])</span></span></span><br><span class="line">    new_user.<span class="function"><span class="title">save</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>
<h4 id="Basic_Template_Usage">Basic Template Usage</h4><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">\</span><span class="expression">&#123;\% <span class="variable">extends</span> <span class="string">"profile_base.html"</span> %&#125;</span><span class="xml"></span><br><span class="line">\</span><span class="expression">&#123;\% <span class="variable">load</span> <span class="variable">staticfiles</span> %&#125;</span><span class="xml"></span><br><span class="line">\</span><span class="expression">&#123;\% <span class="variable">block</span> <span class="variable">headers</span> %&#125;</span><span class="xml"></span><br><span class="line">    <span class="tag">&lt;<span class="title">title</span>&gt;</span>Follow<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">"\</span></span></span><span class="expression">&#123;\% <span class="variable">static</span> <span class="string">"css/bootstrap.min.css"</span> %&#125;</span><span class="xml"><span class="tag"><span class="value">"</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">"\</span></span></span><span class="expression">&#123;\% <span class="variable">static</span> <span class="string">"css/nav.css"</span> %&#125;</span><span class="xml"><span class="tag"><span class="value">"</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">"\</span></span></span><span class="expression">&#123;\% <span class="variable">static</span> <span class="string">"css/profile.css"</span> %&#125;</span><span class="xml"><span class="tag"><span class="value">"</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">"\</span></span></span><span class="expression">&#123;\% <span class="variable">static</span> <span class="string">"css/feed.css"</span> %&#125;</span><span class="xml"><span class="tag"><span class="value">"</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">"\</span></span></span><span class="expression">&#123;\% <span class="variable">static</span> <span class="string">"css/follow.css"</span> %&#125;</span><span class="xml"><span class="tag"><span class="value">"</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"\</span></span></span><span class="expression">&#123;\% <span class="variable">static</span> <span class="string">"js/jquery-3.1.0.min.js"</span> %&#125;</span><span class="xml"><span class="tag"><span class="value">"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"\</span></span></span><span class="expression">&#123;\% <span class="variable">static</span> <span class="string">"js/bootstrap.min.js"</span> %&#125;</span><span class="xml"><span class="tag"><span class="value">"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"\</span></span></span><span class="expression">&#123;\% <span class="variable">static</span> <span class="string">"js/feed.js"</span> %&#125;</span><span class="xml"><span class="tag"><span class="value">"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">\</span><span class="expression">&#123;\% <span class="variable">endblock</span> %&#125;</span><span class="xml"></span><br><span class="line">\</span><span class="expression">&#123;\% <span class="variable">block</span> <span class="variable">content</span> %&#125;</span><span class="xml"></span><br><span class="line">    <span class="tag">&lt;<span class="title">ol</span> <span class="attribute">id</span>=<span class="value">"follow-list"</span>&gt;</span></span><br><span class="line">        \</span><span class="expression">&#123;\% <span class="variable">for</span> <span class="variable">u</span> <span class="variable">in</span> <span class="variable">data.list</span> %&#125;</span><span class="xml"></span><br><span class="line">            <span class="tag">&lt;<span class="title">li</span> <span class="attribute">class</span>=<span class="value">"follow-item"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="title">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="title">a</span> <span class="attribute">class</span>=<span class="value">"follow-avatar-container"</span> <span class="attribute">href</span>=<span class="value">"\</span></span></span><span class="expression">&#123;\% <span class="variable">url</span> '<span class="variable">user</span>' <span class="variable">user</span>_<span class="variable">id</span>=<span class="variable">u.id</span> %&#125;</span><span class="xml"><span class="tag"><span class="value">"</span>&gt;</span></span><br><span class="line">                        \</span><span class="expression">&#123;\% <span class="variable"><span class="keyword">if</span></span> <span class="variable">u.avatar</span> %&#125;</span><span class="xml"></span><br><span class="line">                            <span class="tag">&lt;<span class="title">img</span> <span class="attribute">class</span>=<span class="value">"follow-avatar"</span> <span class="attribute">src</span>=<span class="value">"../../../"</span>&gt;</span></span><br><span class="line">                        \</span><span class="expression">&#123;\% <span class="variable">else</span> %&#125;</span><span class="xml"></span><br><span class="line">                            <span class="tag">&lt;<span class="title">img</span> <span class="attribute">class</span>=<span class="value">"follow-avatar"</span> <span class="attribute">src</span>=<span class="value">"\</span></span></span><span class="expression">&#123;\% <span class="variable">static</span> <span class="string">"img/avatar.jpg"</span> %&#125;</span><span class="xml"><span class="tag"><span class="value">"</span>&gt;</span></span><br><span class="line">                        \</span><span class="expression">&#123;\% <span class="variable">endif</span> %&#125;</span><span class="xml"></span><br><span class="line">                    <span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"follow-content-container"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"follow-first-line"</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="title">a</span> <span class="attribute">class</span>=<span class="value">"follow-author"</span> <span class="attribute">href</span>=<span class="value">"\</span></span></span><span class="expression">&#123;\% <span class="variable">url</span> '<span class="variable">user</span>' <span class="variable">user</span>_<span class="variable">id</span>=<span class="variable">u.id</span> %&#125;</span><span class="xml"><span class="tag"><span class="value">"</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"follow-second-line"</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"feed-content-text"</span>&gt;</span>Age:  &amp;nbsp; Bio: <span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        \</span><span class="expression">&#123;\% <span class="variable">endfor</span> %&#125;</span><span class="xml"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="title">ol</span>&gt;</span></span><br><span class="line">\</span><span class="expression">&#123;\% <span class="variable">endblock</span> %&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure>
</div></article></div></section><footer><div class="paginator"><a href="/2016/Project-GoMarkdown/" class="prev">上一篇</a><a href="/2016/开学第一个月/" class="next">下一篇</a></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-71082558-1",'auto');ga('send','pageview');</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>